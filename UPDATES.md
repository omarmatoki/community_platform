# ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ - New Updates

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุญุฏูุซ ุงููุดุฑูุน ุจููุฒุงุช ุฌุฏูุฏุฉ ุชุดูู:
1. **ุงุณุชุทูุงุนุงุช ุงูุฑุฃู ููุฌูุณุงุช ุงูุญูุงุฑูุฉ** - ูููู ููุฃุฏูู ุฅุถุงูุฉ ุงุณุชุทูุงุน ููู ุฌูุณุฉ
2. **ุชุญุณูู ูุธุงู ุงูุฃูุนุงุจ** - ุชู ุชุญุณูู ุงููููุงุช ุงููุชูุงุทุนุฉ ูุชุดูู ุฃุณุฆูุฉ ูุฅุญุฏุงุซูุงุช

---

## 1. ุงูุฌูุณุงุช ุงูุญูุงุฑูุฉ - ุงุณุชุทูุงุนุงุช ุงูุฑุฃู ุงูุฌุฏูุฏุฉ

### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
โ **ุฅูุดุงุก ุงุณุชุทูุงุน ููุฌูุณุฉ** - ูููู ุงูุฃุฏูู ุจุฅูุดุงุก ุงุณุชุทูุงุน ูุฑุชุจุท ุจุงูุฌูุณุฉ
โ **ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ** - ูููู ุฅุถุงูุฉ ุนุฏุฉ ุฎูุงุฑุงุช ููุงุณุชุทูุงุน
โ **ุงูุชุตููุช ูููุญ ุงูููุงุท** - ุงููุณุชุฎุฏููู ูุตูุชูู ููุญุตููู ุนูู +5 ููุงุท
โ **ุนุฑุถ ุงููุชุงุฆุฌ** - ุฅุธูุงุฑ ุงููุชุงุฆุฌ ูุน ุงููุณุจ ุงููุฆููุฉ
โ **ุฅุถุงูุฉ ุฑุงุจุท Google Meet** - ูุฏููุงู ูู ูุจู ุงูุฃุฏูู
โ **ุฌูุจ ุฑุงุจุท Google Meet** - ูููุณุชุฎุฏููู ุงููุณุฌููู

### Models ุงูุฌุฏูุฏุฉ:

#### 1. SessionPoll
```javascript
{
  id: UUID,
  sessionId: UUID,        // ูุนุฑู ุงูุฌูุณุฉ
  title: String,          // ุนููุงู ุงูุงุณุชุทูุงุน
  endDate: Date,          // ุชุงุฑูุฎ ุงูุชูุงุก ุงูุงุณุชุทูุงุน
  isActive: Boolean,      // ูู ุงูุงุณุชุทูุงุน ูุดุทุ
  pointsReward: Integer   // ุงูููุงุท (ุงูุชุฑุงุถู: 5)
}
```

#### 2. SessionPollOption
```javascript
{
  id: UUID,
  pollId: UUID,           // ูุนุฑู ุงูุงุณุชุทูุงุน
  optionText: String,     // ูุต ุงูุฎูุงุฑ
  voteCount: Integer      // ุนุฏุฏ ุงูุฃุตูุงุช
}
```

#### 3. SessionPollVote
```javascript
{
  id: UUID,
  pollId: UUID,           // ูุนุฑู ุงูุงุณุชุทูุงุน
  optionId: UUID,         // ูุนุฑู ุงูุฎูุงุฑ ุงููุฎุชุงุฑ
  userId: UUID,           // ูุนุฑู ุงููุณุชุฎุฏู
  pointsEarned: Integer   // ุงูููุงุท ุงูููุชุณุจุฉ
}
```

### API Endpoints ุงูุฌุฏูุฏุฉ:

| Method | Endpoint | ุงููุตู | ุงูุตูุงุญูุฉ |
|--------|----------|-------|---------|
| POST | `/api/discussions/:id/poll` | ุฅูุดุงุก ุงุณุชุทูุงุน ููุฌูุณุฉ | Admin |
| GET | `/api/discussions/:id/poll` | ุนุฑุถ ุงุณุชุทูุงุน ุงูุฌูุณุฉ | Public |
| POST | `/api/discussions/:id/poll/vote` | ุงูุชุตููุช (+5 ููุงุท) | Private |
| GET | `/api/discussions/:id/poll/results` | ุนุฑุถ ูุชุงุฆุฌ ุงูุงุณุชุทูุงุน | Public |
| POST | `/api/discussions/:id/meet-link` | ุฅุถุงูุฉ ุฑุงุจุท Google Meet | Admin |
| GET | `/api/discussions/:id/meet-link` | ุฌูุจ ุฑุงุจุท Google Meet | Public |

### ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู:

#### ุฅูุดุงุก ุงุณุชุทูุงุน:
```json
POST /api/discussions/:sessionId/poll
Authorization: Bearer TOKEN

{
  "title": "ูุง ุฑุฃูู ูู ููุถูุน ุงูุฌูุณุฉุ",
  "options": [
    "ููุชุงุฒ ููููุฏ ุฌุฏุงู",
    "ุฌูุฏ",
    "ูุชูุณุท",
    "ูุญุชุงุฌ ูุชุญุณูู"
  ],
  "endDate": "2025-12-14T23:59:59Z",
  "pointsReward": 5
}
```

#### ุงูุชุตููุช:
```json
POST /api/discussions/:sessionId/poll/vote
Authorization: Bearer TOKEN

{
  "optionId": "uuid-of-option"
}
```

#### ุฅุถุงูุฉ ุฑุงุจุท Google Meet:
```json
POST /api/discussions/:sessionId/meet-link
Authorization: Bearer TOKEN

{
  "meetLink": "https://meet.google.com/abc-defg-hij"
}
```

---

## 2. ุงูุฃูุนุงุจ - ุงููููุงุช ุงููุชูุงุทุนุฉ ุงููุญุณููุฉ

### ุงูุชุญุฏูุซุงุช:
โ **ุฃุณุฆูุฉ ุจุฏูุงู ูู ุงูุชูููุญุงุช** - ูู ูููุฉ ููุง ุณุคุงู ูุงูู
โ **ุฅุญุฏุงุซูุงุช ุฏูููุฉ** - ูููุน ุงููููุฉ ูู ุงูุดุจูุฉ (row, col)
โ **ุงูุชุญูู ูู ุงูุจูุงูุงุช** - ุงูุชุฃูุฏ ูู ุตุญุฉ ุงูุจููุฉ ุนูุฏ ุงูุฅูุดุงุก

### ุงูุจููุฉ ุงูุฌุฏูุฏุฉ ูููููุงุช ุงููุชูุงุทุนุฉ:

```json
{
  "type": "crossword",
  "title": "ูููุงุช ูุชูุงุทุนุฉ - ุงููุนู ุงููุฌุชูุนู",
  "content": {
    "words": [
      {
        "number": 1,
        "direction": "across",
        "question": "ูุง ูู ุงููุตุทูุญ ุงูุฐู ูุนูู ุงููุณุงููุฉ ุงููุนุงูุฉ ูู ุญู ุงููุถุงูุง ุงููุฌุชูุนูุฉุ",
        "answer": "ูุดุงุฑูุฉ",
        "position": {
          "row": 0,
          "col": 0
        }
      },
      {
        "number": 2,
        "direction": "down",
        "question": "ูุง ูู ุงูุตูุฉ ุงูุชู ุชุนุจุฑ ุนู ููู ุงุญุชูุงุฌุงุช ููุดุงุนุฑ ุงูุขุฎุฑููุ",
        "answer": "ุชุนุงุทู",
        "position": {
          "row": 0,
          "col": 3
        }
      }
    ]
  },
  "educationalMessage": "ุฃุญุณูุช! ุงููุนู ุงููุฌุชูุนู ูุจุฏุฃ ุจุงููุดุงุฑูุฉ ูุงูุชุนุงุทู",
  "pointsReward": 15
}
```

### ุงูุชุญูู ูู ุงูุจูุงูุงุช:
- ูุฌุจ ุฃู ูุญุชูู `content` ุนูู ูุตูููุฉ `words`
- ูู ูููุฉ ูุฌุจ ุฃู ุชุญุชูู ุนูู: `number`, `direction`, `question`, `answer`, `position`
- `direction` ูุฌุจ ุฃู ูููู `across` ุฃู `down`
- `position` ูุฌุจ ุฃู ูุญุชูู ุนูู `row` ู `col` (ุฃุฑูุงู ููุฌุจุฉ)

---

## 3. ุงูุนูุงูุงุช (Relationships) ุงูุฌุฏูุฏุฉ

### ุนูุงูุงุช ุงุณุชุทูุงุนุงุช ุงูุฌูุณุงุช:

```
DiscussionSession (1) -----> (1) SessionPoll
SessionPoll (1) -----> (N) SessionPollOption
SessionPoll (1) -----> (N) SessionPollVote
SessionPollOption (1) -----> (N) SessionPollVote
User (1) -----> (N) SessionPollVote
```

---

## 4. ููู Postman ุงููุญุฏุซ

ุชู ุฅูุดุงุก ููู Postman ุฌุฏูุฏ: `postman_collection_updated.json`

### ุงููุญุชููุงุช:
- โ ุฌููุน ุงูู endpoints ุงููุฏููุฉ
- โ 6 endpoints ุฌุฏูุฏุฉ ููุงุณุชุทูุงุนุงุช ูุงูู Meet Links
- โ ูุซุงู ุนูู ุฅูุดุงุก ูุนุจุฉ ูููุงุช ูุชูุงุทุนุฉ ูุญุณููุฉ
- โ ูุชุบูุฑุงุช ุฌุฏูุฏุฉ: `sessionPollId`, `optionId`
- โ Scripts ุชููุงุฆูุฉ ูุญูุธ ุงููุชุบูุฑุงุช

---

## 5. ุงููููุงุช ุงููุญุฏุซุฉ

### Models:
- โ `models/SessionPoll.js` - ุฌุฏูุฏ
- โ `models/SessionPollOption.js` - ุฌุฏูุฏ
- โ `models/SessionPollVote.js` - ุฌุฏูุฏ
- โ `models/Game.js` - ูุญุฏุซ (ุชุนููู ุนูู content)
- โ `models/index.js` - ูุญุฏุซ (ุฅุถุงูุฉ ุงูุนูุงูุงุช ุงูุฌุฏูุฏุฉ)

### Controllers:
- โ `controllers/discussionController.js` - ูุญุฏุซ (6 ุชูุงุจุน ุฌุฏูุฏุฉ)
- โ `controllers/gameController.js` - ูุญุฏุซ (ุงูุชุญูู ูู ุจููุฉ ุงููููุงุช ุงููุชูุงุทุนุฉ)

### Routes:
- โ `routes/discussionRoutes.js` - ูุญุฏุซ (6 ูุณุงุฑุงุช ุฌุฏูุฏุฉ)

### Other:
- โ `postman_collection_updated.json` - ุฌุฏูุฏ
- โ `UPDATES.md` - ูุฐุง ุงูููู

---

## 6. ููููุฉ ุงูุชุฌุฑุจุฉ

### 1. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
ุณูุชู ุฅูุดุงุก ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู ุนูุฏ ุชุดุบูู ุงูุณูุฑูุฑ:
```bash
npm run dev
```

### 2. ุงุณุชูุฑุงุฏ Postman Collection:
- ุงูุชุญ Postman
- Import โ ุงุฎุชุฑ `postman_collection_updated.json`
- ุงุจุฏุฃ ุจุชุฌุฑุจุฉ ุงูู endpoints ุงูุฌุฏูุฏุฉ

### 3. ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู:

#### ุฃ) ุงูุฌูุณุงุช ุงูุญูุงุฑูุฉ:
1. ุณุฌู ุฏุฎูู ูู Admin
2. ุฃูุดุฆ ุฌูุณุฉ ุญูุงุฑูุฉ ุฌุฏูุฏุฉ
3. ุฃูุดุฆ ุงุณุชุทูุงุน ููุฌูุณุฉ
4. ุงููุณุชุฎุฏููู ูุตูุชูู ููุญุตููู ุนูู +5 ููุงุท
5. ุงูุฃุฏูู ูุถูู ุฑุงุจุท Google Meet ุจุนุฏ ุงูุชูุงุก ุงูุงุณุชุทูุงุน
6. ุงููุณุชุฎุฏููู ูุฌูุจูู ุฑุงุจุท Meet

#### ุจ) ุงููููุงุช ุงููุชูุงุทุนุฉ:
1. ุณุฌู ุฏุฎูู ูู Admin
2. ุฃูุดุฆ ูุนุจุฉ ูููุงุช ูุชูุงุทุนุฉ ุจุงูุจููุฉ ุงูุฌุฏูุฏุฉ
3. ุงููุณุชุฎุฏููู ูุญููู ุงููุนุจุฉ ููุญุตููู ุนูู +15 ููุทุฉ

---

## 7. ูุธุงู ุงูููุงุท ุงููุญุฏุซ

| ุงููุดุงุท | ุงูููุงุท |
|--------|--------|
| ูุฑุงุกุฉ ููุงู | 5 ููุงุท |
| ุฅููุงู ุงุณุชุจูุงู (70%+) | 10 ููุงุท |
| ุฅููุงู ูุนุจุฉ | 15 ููุทุฉ |
| **ุงูุชุตููุช ูู ุงุณุชุทูุงุน ุฌูุณุฉ** | **5 ููุงุท** โญ ุฌุฏูุฏ |
| ุงูุชุตููุช ูู ุงุณุชุทูุงุน ุฑุฃู | 5 ููุงุท |
| ุญุถูุฑ ุฌูุณุฉ ุญูุงุฑูุฉ | 20 ููุทุฉ |

---

## 8. ููุงุญุธุงุช ูููุฉ

### ุงูุฃูุงู:
- โ ุฌููุน ุงูุชูุงุจุน ูุญููุฉ ุจู JWT Authentication
- โ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช (Admin/User)
- โ ููุน ุงูุชุตููุช ุงููุชูุฑุฑ ูู ููุณ ุงูุงุณุชุทูุงุน
- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ

### ุงูุฃุฏุงุก:
- โ ุงูุนูุงูุงุช ูุญุณููุฉ ูุน Indexes
- โ ุงุณุชุฎุฏุงู `include` ูุชูููู ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช

### ุงูุชูุงูููุฉ:
- โ ุฌููุน ุงูู endpoints ุงููุฏููุฉ ุชุนูู ุจุฏูู ุชุบููุฑ
- โ ูุง ุชูุฌุฏ breaking changes

---

## 9. ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุฑ: `npm run dev`
2. ุชุฃูุฏ ูู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฑุงุฌุน ููู `.env` ููุชุฃูุฏ ูู ุงูุฅุนุฏุงุฏุงุช
4. ุงุณุชุฎุฏู Postman Collection ุงููุญุฏุซ ููุชุฌุฑุจุฉ

---

ุชู ุจูุฌุงุญ! ๐
ุฌููุน ุงูุชุนุฏููุงุช ุชูุช ุจุฏูู ุฃุฎุทุงุก ูุงููุดุฑูุน ุฌุงูุฒ ููุชุดุบูู.
